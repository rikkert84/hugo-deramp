<script>
const map = L.map('zeeland-map').setView([51.65, 4.05], 9);

// Positron (wit/grijs, sober)
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'
}).addTo(map);

// ✅ SOBER MARKER DEFINITIE
const soberIcon = L.divIcon({
  html: '<div style="background:#333; width:8px; height:8px; border-radius:50%; border:1px solid #666;"></div>',
  iconSize: [10, 10],
  iconAnchor: [5, 5],
  className: 'custom-marker',  /* Geen extra padding */
  popupAnchor: [0, -10]
});

// Dynamische markers MET sober icon
{{ range .Pages }}
  {{ $coords := .Params.coördinaten }}
  {{ if $coords }}
    {{ $parts := split $coords " " }}
    {{ if ge (len $parts) 2 }}
      {{ $lat := (index $parts 0 | strings.TrimSpace | float) }}
      {{ $lng := (index $parts 1 | strings.TrimSpace | float) }}
      L.marker([{{$lat}}, {{$lng}}], { icon: soberIcon })
        .bindPopup(`
          <b>{{.Title}}</b><br>
          {{ .Params.aantal_slachtoffers | default "Onbekend" }} slachtoffers
        `)
        .addTo(map);
    {{ end }}
  {{ end }}
{{ end }}

function zoomTo(coords) {
  const [lat, lng] = coords.split(' ').map(s => parseFloat(s.trim()));
  map.setView([lat, lng], 14);
}
</script>

<style>
.custom-marker {
  background: none !important;
  border: none !important;
}
</style>
