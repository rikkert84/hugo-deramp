{{ define "main" }}
<h1>Plaatsen ({{ len .Pages }})</h1>
<div id="map" style="height:600px;"></div>

{{ range .Pages }}
  <div onclick="zoomTo('{{ .Params.coördinaten | split ',' | first }}', '{{ .Params.coördinaten | split ',' | last }}')">
    {{ .Title }} ({{ len (where .Site.RegularPages "Params.plaatsnaam" .Title) }})
  </div>
{{ end }}

<script>
const map = L.map('map').setView([51.5, 3.8], 10);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

function zoomTo(lat, lng) {
  map.setView([lat, lng], 14);
}
</script>
{{ end }}
